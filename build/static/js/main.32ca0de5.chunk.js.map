{"version":3,"sources":["services/AuthService.js","pages/home/Home.js","pages/about/About.js","pages/login/Login.js","routes.js","components/app/App.js","index.js"],"names":["AuthService","domain","Object","classCallCheck","this","fetch","bind","login","getProfile","username","password","_this","concat","method","body","JSON","stringify","then","res","setToken","access_token","setRefreshToken","refresh_token","Promise","resolve","token","getToken","isTokenExpired","rfToken","getRefreshToken","refreshToken","refreshTokenId","_this2","headers","Content-Type","Authorization","json","console","log","decode","exp","Date","now","err","idToken","localStorage","setItem","getItem","removeItem","url","options","Accept","loggedIn","objectSpread","_checkStatus","response","status","error","Error","statusText","Home","react_default","a","createElement","className","props","children","Component","About","Login","possibleConstructorReturn","getPrototypeOf","call","handleChange","assertThisInitialized","handleClickSubmit","Auth","placeholder","name","type","onChange","value","onClick","e","setState","defineProperty","target","preventDefault","state","hashHistory","replace","catch","alert","PrivateRoute","_ref","component","rest","objectWithoutProperties","es","assign","render","to","pathname","from","history","location","Routes","routes_PrivateRoute","exact","path","App","routes","ReactDOM","app_App","document","getElementById"],"mappings":"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","file":"static/js/main.32ca0de5.chunk.js","sourcesContent":["import decode from 'jwt-decode';\n\nclass AuthService \n{\n\n\tconstructor(domain)\n\t{\n\n\t\tthis.domain\t\t\t= domain || 'http://localhost:5000';\n\t\tthis.fetch\t\t\t= this.fetch.bind(this);\n\t\tthis.login\t\t\t= this.login.bind(this);\n\t\tthis.getProfile \t= this.getProfile.bind(this);\n\n\t}\n\n\tlogin(username, password) \n\t{\n\t\treturn this.fetch(`${this.domain}/auth`,\n\t\t\t{\n\t\t\t\tmethod: 'POST',\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tusername: username, \n\t\t\t\t\tpassword: password\n\t\t\t\t})\n\t\t\t}\n\t\t).then(res => {\n\t\t\tthis.setToken(res.access_token);\n\t\t\tthis.setRefreshToken(res.refresh_token);\n\t\t\treturn Promise.resolve(res);\n\t\t});\n\n\t}\n\n\tloggedIn() \n\t{\n\t\tconst token = this.getToken();\n\t\t\n\t\tif(!!!token) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif(this.isTokenExpired(token)) {\n\t\t\t\n\t\t\tconst rfToken = this.getRefreshToken();\n\n\t\t\tif(this.isTokenExpired(rfToken)) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis.refreshToken(rfToken);\n\t\t}\n\t\t\n\t\treturn true;\n\t}\n\n\trefreshToken(refreshTokenId) \n\t{\n\t\treturn fetch(`${this.domain}/refresh`,\n\t\t\t{\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'Authorization': 'Bearer ' + this.getRefreshToken()\n\t\t\t\t},\t\n\t\t\t\tmethod: 'POST'\n\t\t\t}\n\t\t).then(res => {\n\t\t\tres.json().then(json => {\n\t\t\t\tthis.setToken(json.access_token);\n\t\t\t\tconsole.log(\"token refreshed\");\t\n\t\t\t})\n\t\t});\n\t}\n\n\tisTokenExpired(token) \n\t{\n\t\ttry\n\t\t{\n\t\t\tconst decoded = decode(token);\n\n\t\t\tif(decoded.exp < Date.now() / 1000) {\n\t\t\t\treturn true;\n\t\t\t} \n\t\t\t\n\t\t\treturn false;\n\n\t\t} catch(err) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tsetToken(idToken) {\n\t\tlocalStorage.setItem('id_token', idToken);\n\t}\n\n\tgetToken() {\n\t\treturn localStorage.getItem('id_token');\n\t}\n\n\tsetRefreshToken(idToken) {\n\t\tlocalStorage.setItem('id_refresh_token', idToken);\n\t}\n\n\tgetRefreshToken() {\n\t\treturn localStorage.getItem('id_refresh_token');\n\t}\n\n\tlogout() {\n\t\tlocalStorage.removeItem('id_token');\n\t\tlocalStorage.removeItem('id_refresh_token');\n\t}\n\n\tgetProfile() {\n\t\treturn decode(this.getToken());\n\t}\n\n\tfetch(url, options) \n\t{\n\t\tconst headers = {\n\t\t\t'Accept': 'application/json',\n\t\t\t'Content-Type': 'application/json'\n\t\t}\n\n\t\tif(this.loggedIn()) {\n\t\t\theaders['Authorizarion'] = 'Bearer ' + this.getToken();\n\t\t}\n\n\t\treturn fetch(url, {\n\t\t\theaders,\n\t\t\t...options\n\t\t})\n\t\t\t.then(this._checkStatus)\n\t\t\t.then(response => response.json())\n\t}\n\n\t_checkStatus(response) {\n\n\t\tif(response.status >= 200 && response.status < 300) {\n\t\t\treturn response;\n\t\t} else \n\t\t{\n\t\t\tvar error = new Error(response.statusText);\n\t\t\terror.response = response;\n\t\t\tthrow error;\n\t\t}\n\t}\n}\n\nexport default AuthService;","import React, { Component } from 'react';\n\nclass Home extends Component {\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"container\">\n\t\t\t\t<div className=\"header\">Cabeçalho</div>\n\n\t\t\t\t<div className=\"content\">{this.props.children}</div>\n\n\t\t\t\t<div className=\"footer\">Rodapé</div>\t\t\t\t\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Home;","import React, { Component } from 'react';\n\nclass About extends Component \n{\n\trender() \n\t{\n\t\treturn (\n\t\t\t<h1>About</h1>\n\t\t);\n\n\t}\n\n}\n\nexport default About;","import React, { Component } from 'react';\nimport AuthService from '../../services/AuthService';\nimport { hashHistory } from 'react-router';\n\nclass Login extends Component \n{\n\n\tconstructor() \n\t{\n\t\tsuper();\n\t\tthis.handleChange \t\t= this.handleChange.bind(this);\n\t\tthis.handleClickSubmit\t= this.handleClickSubmit.bind(this);\n\t\tthis.Auth \t\t\t\t= new AuthService();\n\t}\n\t\n\trender() \n\t{\n\n\t\treturn (\n\t\t\t<div className=\"center\">\n\t\t\t\t<div className=\"card\">\n\t\t\t\t\t<h1>Login</h1>\n\t\t\t\t\t<form>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\tclassName=\"form-item\"\n\t\t\t\t\t\tplaceholder=\"Username goes here...\"\n\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\tclassName=\"form-item\"\n\t\t\t\t\t\tplaceholder=\"Password goes here...\"\n\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\tclassName=\"form-submit\"\n\t\t\t\t\t\tvalue=\"SUBMIT\"\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={this.handleClickSubmit}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\n\t}\n\n\thandleChange(e)\n\t{\n        \n        this.setState(\n            {\n                [e.target.name]: e.target.value\n            }\n        )\n\n    }\n\n    handleClickSubmit(e) \n    {\n    \t\n    \te.preventDefault();\n    \tthis.Auth.login(this.state.username, this.state.password)\n    \t\t.then(res => {\n    \t\t\thashHistory.replace('/');\n    \t\t})\n    \t\t.catch(err=> {\n    \t\t\talert(err);\n    \t\t})\n    }\n\n    componentWillMount()\n    {\n    \tif(this.Auth.loggedIn()) {\n    \t\thashHistory.replace('/');\n    \t}\n    }\n\n}\n\nexport default Login;","import React, { Component } from 'react';\nimport { Router, hashHistory, Route, Redirect } from 'react-router';\nimport AuthService from './services/AuthService'\nimport \tHome \tfrom './pages/home/Home';\nimport \tAbout \tfrom './pages/about/About';\nimport \tLogin \tfrom './pages/login/Login';\n\nconst Auth = new AuthService();\n\nconst PrivateRoute = ({ component: Component, ...rest }) => (\n  \t<Route {...rest}\n\t\trender={\n\t\t\t(props) => Auth.loggedIn() === true ? \n\t\t\t\t<Component {...props} /> : \n\t\t\t\t<Redirect to={{ pathname: '/login', state: { from: props.history.location } }} />\n\t\t}\n  \t/>\n);\n\nclass Routes extends Component {\n\n\trender() {\n\t\treturn (\n\t\t\t<Router history={ hashHistory }>\n\t\t\t\t<PrivateRoute exact path=\"/\" component={ Home }>\n\t\t\t\t\t<PrivateRoute path=\"/about\" component={ About } />\n\t\t\t\t</PrivateRoute>\n\t\t\t\t<Route path=\"/login\" component={ Login } />\n\t\t\t</Router>\n\t\t);\n\t}\n}\n\nexport default Routes;","import React, { Component } from 'react';\n\nimport \tRoutes \tfrom '../../routes';\n\nclass App extends Component {\n\n\trender() {\n\t\treturn (\t\t\t\n\t\t\t<Routes />\n\t\t);\n\t}\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './components/app/App';\n\nReactDOM.render(\n\t<App />,\n\tdocument.getElementById('root')\n)\n"],"sourceRoot":""}