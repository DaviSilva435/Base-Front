{"ast":null,"code":"import _toConsumableArray from \"/home/davi/Desktop/gerenciamento-estagio-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/home/davi/Desktop/gerenciamento-estagio-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/davi/Desktop/gerenciamento-estagio-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/davi/Desktop/gerenciamento-estagio-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/davi/Desktop/gerenciamento-estagio-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/davi/Desktop/gerenciamento-estagio-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/davi/Desktop/gerenciamento-estagio-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/davi/Desktop/gerenciamento-estagio-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport RestService from '../../services/RestService';\nimport BasePage from './BasePage';\nimport { AlertifyError, AlertifySuccess } from \"../../services/AlertifyService\";\nvar Rest = new RestService();\n\nvar BasePageList =\n/*#__PURE__*/\nfunction (_BasePage) {\n  _inherits(BasePageList, _BasePage);\n\n  function BasePageList(props) {\n    var _this;\n\n    _classCallCheck(this, BasePageList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(BasePageList).call(this, props));\n    _this._isMounted = false;\n    _this.state = _objectSpread({\n      itens: [],\n      pagination: {\n        current: 0,\n        itens_count: 0,\n        itens_per_page: 0,\n        next: null,\n        pages_count: 0,\n        prev: null\n      }\n    }, _this.state);\n    _this.fetchList = _this.fetchList.bind(_assertThisInitialized(_this));\n    _this.handleReceiveDataPage = _this.handleReceiveDataPage.bind(_assertThisInitialized(_this));\n    _this.handleClickPage = _this.handleClickPage.bind(_assertThisInitialized(_this));\n    _this.handleOnEditAction = _this.handleOnEditAction.bind(_assertThisInitialized(_this));\n    _this.actionView = _this.actionView.bind(_assertThisInitialized(_this));\n    _this.actionDelete = _this.actionDelete.bind(_assertThisInitialized(_this));\n    _this.actionEdit = _this.actionEdit.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(BasePageList, [{\n    key: \"fetchList\",\n    value: function fetchList(parameters) {\n      return Rest.get(this.props.urlBase, parameters);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n  }, {\n    key: \"handleReceiveDataPage\",\n    value: function handleReceiveDataPage(res) {\n      if (this._isMounted) {\n        var pagination = {\n          current: res.data.pagination.current,\n          itens_count: res.data.pagination.itens_count,\n          itens_per_page: res.data.pagination.itens_per_page,\n          next: res.data.pagination.next,\n          pages_count: res.data.pagination.pages_count,\n          prev: res.data.pagination.prev\n        };\n        this.setState({\n          itens: _toConsumableArray(res.data.itens),\n          pagination: pagination\n        });\n      }\n    }\n  }, {\n    key: \"handleOnEditAction\",\n    value: function handleOnEditAction(e) {\n      debugger;\n    }\n  }, {\n    key: \"handleClickPage\",\n    value: function handleClickPage(page) {\n      this.fetchList({\n        page: page\n      }).then(this.handleReceiveDataPage);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true;\n      this.fetchList().then(this.handleReceiveDataPage);\n      this.setState({\n        actions: [{\n          label: 'action.edit',\n          field: \"edit\",\n          handle: this.actionEdit\n        }, {\n          label: 'action.delete',\n          field: \"delete\",\n          handle: this.actionDelete\n        }, {\n          label: 'action.view',\n          field: \"view\",\n          handle: this.actionView\n        }]\n      });\n    }\n  }, {\n    key: \"actionView\",\n    value: function actionView(event, id) {\n      var url = \"/\" + this.props.urlBase.split(\"/\")[0] + \"/view\";\n      this.props.history.push({\n        pathname: url,\n        state: {\n          item_id: id\n        }\n      });\n    }\n  }, {\n    key: \"actionDelete\",\n    value: function actionDelete(event, id) {\n      var tr = event.currentTarget.parentElement.parentElement;\n      var url = this.props.urlBase.split(\"/\")[0] + \"/delete/\";\n      Rest.delete(url + id, {}).then(function (resposta) {\n        if (resposta.status === 200) {\n          AlertifySuccess([{\n            message: resposta.data.message\n          }]);\n          tr.remove();\n        }\n      }).catch(function (error) {\n        AlertifyError([error]);\n      });\n    }\n  }, {\n    key: \"actionEdit\",\n    value: function actionEdit(event, id) {\n      var url = \"/\" + this.props.urlBase.split(\"/\")[0] + \"/edit\";\n      this.props.history.push({\n        pathname: url,\n        state: {\n          item_id: id\n        }\n      });\n    }\n  }]);\n\n  return BasePageList;\n}(BasePage);\n\nexport default BasePageList;","map":{"version":3,"sources":["/home/davi/Desktop/gerenciamento-estagio-frontend/src/pages/basePage/BasePageList.js"],"names":["RestService","BasePage","AlertifyError","AlertifySuccess","Rest","BasePageList","props","_isMounted","state","itens","pagination","current","itens_count","itens_per_page","next","pages_count","prev","fetchList","bind","handleReceiveDataPage","handleClickPage","handleOnEditAction","actionView","actionDelete","actionEdit","parameters","get","urlBase","res","data","setState","e","page","then","actions","label","field","handle","event","id","url","split","history","push","pathname","item_id","tr","currentTarget","parentElement","delete","resposta","status","message","remove","catch","error"],"mappings":"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","sourcesContent":["import RestService from '../../services/RestService';\nimport BasePage from './BasePage';\nimport {AlertifyError, AlertifySuccess} from \"../../services/AlertifyService\";\n\nconst Rest = new RestService();\n\nclass BasePageList extends BasePage\n{\n\t_isMounted = false;\n\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\titens: [],\n\t\t\tpagination: {\n\t\t\t\tcurrent: 0,\n\t\t\t\titens_count: 0,\n\t\t\t\titens_per_page: 0,\n\t\t\t\tnext: null,\n\t\t\t\tpages_count: 0,\n\t\t\t\tprev: null\n\t\t\t},\n\t\t\t...this.state\n\t\t};\n\n\t\tthis.fetchList = this.fetchList.bind(this);\n\t\tthis.handleReceiveDataPage = this.handleReceiveDataPage.bind(this);\n\t\tthis.handleClickPage = this.handleClickPage.bind(this);\n\t\tthis.handleOnEditAction = this.handleOnEditAction.bind(this);\n\t\tthis.actionView = this.actionView.bind(this);\n\t\tthis.actionDelete = this.actionDelete.bind(this);\n\t\tthis.actionEdit = this.actionEdit.bind(this);\n\t}\n\n\tfetchList(parameters) {\n\t\treturn Rest.get(this.props.urlBase, parameters);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis._isMounted = false;\n\t}\n\n\thandleReceiveDataPage(res)\n\t{\n\t\tif (this._isMounted)\n\t\t{\n\t\t\tlet pagination = {\n\t\t\t\tcurrent: res.data.pagination.current,\n\t\t\t\titens_count: res.data.pagination.itens_count,\n\t\t\t\titens_per_page: res.data.pagination.itens_per_page,\n\t\t\t\tnext: res.data.pagination.next,\n\t\t\t\tpages_count: res.data.pagination.pages_count,\n\t\t\t\tprev: res.data.pagination.prev\n\t\t\t};\n\n\t\t\tthis.setState({\n\t\t\t\titens: [...res.data.itens],\n\t\t\t\tpagination: pagination\n\t\t\t});\n\t\t}\n\t}\n\n\thandleOnEditAction(e) {\n        debugger;\n    }\n\n\thandleClickPage(page)\n\t{\n\t\tthis.fetchList({\n\t\t\tpage: page\n\t\t}).then(this.handleReceiveDataPage);\n\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\tthis._isMounted = true;\n\t\tthis.fetchList().then(this.handleReceiveDataPage);\n\t\tthis.setState(({\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'action.edit',\n\t\t\t\t\tfield: \"edit\",\n\t\t\t\t\thandle: this.actionEdit\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'action.delete',\n\t\t\t\t\tfield: \"delete\",\n\t\t\t\t\thandle: this.actionDelete\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: 'action.view',\n\t\t\t\t\tfield: \"view\",\n\t\t\t\t\thandle: this.actionView\n\t\t\t\t}\n\t\t\t]\n\t\t}));\n\t}\n\n\tactionView(event, id) {\n\t\tlet url = \"/\" + this.props.urlBase.split(\"/\")[0] + \"/view\";\n\t\tthis.props.history.push({\n\t\t\tpathname: url,\n\t\t\tstate: {item_id: id}\n\t\t});\n\t}\n\n\tactionDelete(event, id) {\n\t\tlet tr = event.currentTarget.parentElement.parentElement;\n\t\tlet url = this.props.urlBase.split(\"/\")[0] + \"/delete/\";\n\t\tRest.delete(url + id, {}).then(function (resposta) {\n\t\t\tif (resposta.status === 200) {\n\t\t\t\tAlertifySuccess([{message: resposta.data.message}]);\n\t\t\t\ttr.remove();\n\t\t\t}\n\t\t}).catch(function (error) {\n\t\t\tAlertifyError([error]);\n\t\t});\n\t}\n\n\tactionEdit(event, id) {\n\t\tlet url = \"/\" + this.props.urlBase.split(\"/\")[0] + \"/edit\";\n\t\tthis.props.history.push({\n\t\t\tpathname: url,\n\t\t\tstate: {item_id: id}\n\t\t});\n\t}\n\n}\n\nexport default BasePageList;"]},"metadata":{},"sourceType":"module"}