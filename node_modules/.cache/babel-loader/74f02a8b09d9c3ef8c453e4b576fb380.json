{"ast":null,"code":"import _defineProperty from \"/home/davi/Desktop/gerenciamento-estagio-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/davi/Desktop/gerenciamento-estagio-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/davi/Desktop/gerenciamento-estagio-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/davi/Desktop/gerenciamento-estagio-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/davi/Desktop/gerenciamento-estagio-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/davi/Desktop/gerenciamento-estagio-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/davi/Desktop/gerenciamento-estagio-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/davi/Desktop/gerenciamento-estagio-frontend/src/pages/login/Login.js\";\nimport React, { Component } from 'react';\nimport AuthService from '../../services/AuthService';\nimport { CenterCard } from '../../components/template/Layout';\nimport { InputInGroup, RememberMeInGroup, ButtonSubmit, ButtonRegister } from '../../components/template/Form';\nimport { AlertifyError, AlertifySuccess } from '../../services/AlertifyService';\nimport MessageService from '../../services/MessageService';\nvar Message = new MessageService();\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_this));\n    _this.Auth = new AuthService();\n    _this.state = {\n      fieldErrors: {\n        username: null,\n        password: null\n      },\n      formErrors: []\n    };\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(CenterCard, {\n        title: \"page.user.login.title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 28\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29\n        },\n        __self: this\n      }, React.createElement(InputInGroup, {\n        type: \"text\",\n        name: \"username\",\n        errors: this.state.fieldErrors,\n        onChange: this.handleChange,\n        label: \"page.user.login.username\",\n        required: \"required\",\n        autofocus: \"autofocus\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30\n        },\n        __self: this\n      }), React.createElement(InputInGroup, {\n        type: \"password\",\n        name: \"password\",\n        errors: this.state.fieldErrors,\n        onChange: this.handleChange,\n        label: \"page.user.login.password\",\n        required: \"required\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32\n        },\n        __self: this\n      }), React.createElement(RememberMeInGroup, {\n        text: \"page.user.login.remember\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34\n        },\n        __self: this\n      }), React.createElement(ButtonSubmit, {\n        type: \"submit\",\n        text: \"page.user.login.submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36\n        },\n        __self: this\n      }), React.createElement(ButtonRegister, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      })));\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(e) {\n      this.setState(_defineProperty({}, e.target.name, e.target.value));\n    }\n  }, {\n    key: \"handleErrorLogin\",\n    value: function handleErrorLogin(errors) {\n      this.setState({\n        fieldErrors: {\n          username: errors.fields.username,\n          password: errors.fields.password\n        },\n        formErrors: errors.form\n      });\n      AlertifyError(errors.form);\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      this.Auth.login(this.state.username, this.state.password).then(function (res) {\n        if (res.error) {\n          _this2.handleErrorLogin(res.errors);\n        } else {\n          AlertifySuccess([{\n            message: Message.getMessage('page.user.login.success')\n          }]);\n\n          _this2.props.history.push('/');\n        }\n      }).catch(function (err) {\n        alert(err);\n      });\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      if (this.Auth.loggedIn()) {\n        this.props.history.push('/');\n      }\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport default Login;","map":{"version":3,"sources":["/home/davi/Desktop/gerenciamento-estagio-frontend/src/pages/login/Login.js"],"names":["React","Component","AuthService","CenterCard","InputInGroup","RememberMeInGroup","ButtonSubmit","ButtonRegister","AlertifyError","AlertifySuccess","MessageService","Message","Login","handleChange","bind","handleSubmit","Auth","state","fieldErrors","username","password","formErrors","e","setState","target","name","value","errors","fields","form","preventDefault","login","then","res","error","handleErrorLogin","message","getMessage","props","history","push","catch","err","alert","loggedIn"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport AuthService from '../../services/AuthService';\nimport { CenterCard } from '../../components/template/Layout';\nimport { InputInGroup, RememberMeInGroup, ButtonSubmit, ButtonRegister} from '../../components/template/Form';\nimport { AlertifyError, AlertifySuccess } from '../../services/AlertifyService';\nimport MessageService from '../../services/MessageService';\n\nconst Message = new MessageService();\n\nclass Login extends Component\n{\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\tthis.Auth = new AuthService();\n\t\tthis.state = {\n\t\t\tfieldErrors: {username: null, password: null},\n\t\t\tformErrors: []\n\t\t};\n\t}\n\n\trender()\n\t{\n\t\treturn (\n\t\t\t<CenterCard title='page.user.login.title'>\n\t\t\t\t<form onSubmit={ this.handleSubmit }>\n\t\t\t\t\t<InputInGroup type=\"text\" name=\"username\" errors={ this.state.fieldErrors }  onChange={ this.handleChange }\n\t\t\t\t\t\tlabel='page.user.login.username' required=\"required\" autofocus=\"autofocus\"/>\n\t\t\t\t\t<InputInGroup type=\"password\" name=\"password\" errors={ this.state.fieldErrors} onChange={ this.handleChange }\n\t\t\t\t\t\tlabel='page.user.login.password' required=\"required\" />\n\t\t\t\t\t<RememberMeInGroup text='page.user.login.remember' />\n\t\t\t\t\t<ButtonSubmit type=\"submit\" text='page.user.login.submit' />\n\t\t\t\t\t<p>\n\n\t\t\t\t\t</p>\n\t\t\t\t\t<ButtonRegister  />\n\n\t\t\t\t</form>\n\n\t\t\t</CenterCard>\n\t\t);\n\t}\n\n\thandleChange(e)\n\t{\n        this.setState({\n                [e.target.name]: e.target.value\n            }\n        )\n    }\n\n    handleErrorLogin(errors)\n    {\n    \tthis.setState({\n    \t\tfieldErrors: {\n    \t\t\tusername: errors.fields.username,\n    \t\t\tpassword: errors.fields.password\n    \t\t},\n    \t\tformErrors: errors.form\n    \t});\n        AlertifyError(errors.form);\n\t}\n\t\n\n    handleSubmit(e)\n    {\n    \te.preventDefault();\n    \tthis.Auth.login(this.state.username, this.state.password)\n    \t\t.then(res => {\n    \t\t\tif (res.error)\n    \t\t\t{\n    \t\t\t\tthis.handleErrorLogin(res.errors);\n    \t\t\t} else {\n\t\t\t\t\tAlertifySuccess([{message: Message.getMessage('page.user.login.success')}]);\n\t\t\t\t\tthis.props.history.push('/');\n    \t\t\t}\n    \t\t})\n    \t\t.catch(err=> {\n    \t\t\talert(err);\n    \t\t})\n    }\n\n    componentWillMount()\n    {\n    \tif(this.Auth.loggedIn()) {\n    \t\tthis.props.history.push('/');\n    \t}\n    }\n\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}