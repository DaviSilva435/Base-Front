{"ast":null,"code":"import _regeneratorRuntime from \"/home/davi/Desktop/gerenciamento-estagio-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/davi/Desktop/gerenciamento-estagio-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/davi/Desktop/gerenciamento-estagio-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/davi/Desktop/gerenciamento-estagio-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/davi/Desktop/gerenciamento-estagio-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/davi/Desktop/gerenciamento-estagio-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/davi/Desktop/gerenciamento-estagio-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/davi/Desktop/gerenciamento-estagio-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/davi/Desktop/gerenciamento-estagio-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport BasePage from './BasePage';\nimport RestService from '../../services/RestService';\nimport { AlertifySuccess, AlertifyError } from '../../services/AlertifyService';\nvar Rest = new RestService();\n\nvar BasePageForm =\n/*#__PURE__*/\nfunction (_BasePage) {\n  _inherits(BasePageForm, _BasePage);\n\n  function BasePageForm(props) {\n    var _this;\n\n    _classCallCheck(this, BasePageForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(BasePageForm).call(this, props));\n\n    if (_this.props.role == null) {\n      _this.props.onLoadUserRole();\n    }\n\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.handleOnSubmit = _this.handleOnSubmit.bind(_assertThisInitialized(_this));\n    _this.handleReceiveResponseRest = _this.handleReceiveResponseRest.bind(_assertThisInitialized(_this));\n    _this.handleCancel = _this.handleCancel.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(BasePageForm, [{\n    key: \"handleChange\",\n    value: function handleChange(e) {\n      var _this$setState;\n\n      this.setState((_this$setState = {}, _defineProperty(_this$setState, e.target.name, e.target.value), _defineProperty(_this$setState, \"fieldErrors\", []), _this$setState));\n    }\n  }, {\n    key: \"handleReceiveResponseRest\",\n    value: function handleReceiveResponseRest(res) {\n      if (res.data.error) {\n        var arrErrors = [];\n        var arrKeys = Object.keys(res.data.errors.fields);\n\n        for (var i = 0; i < arrKeys.length; i++) {\n          arrErrors[arrKeys[i]] = res.data.errors.fields[arrKeys[i]].message;\n        }\n\n        this.setState({\n          fieldErrors: arrErrors\n        });\n        AlertifyError(res.data.errors.form);\n        console.log(res.data.message);\n      } else {\n        AlertifySuccess([{\n          message: res.data.message\n        }]);\n        this.props.history.push('/' + this.props.urlBase.split('/')[0] + '/list');\n      }\n    }\n  }, {\n    key: \"handleOnSubmit\",\n    value: function () {\n      var _handleOnSubmit = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(this.state);\n                Rest.post(this.props.urlBase, this.state).then(this.handleReceiveResponseRest);\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function handleOnSubmit(_x) {\n        return _handleOnSubmit.apply(this, arguments);\n      }\n\n      return handleOnSubmit;\n    }()\n  }, {\n    key: \"handleCancel\",\n    value: function handleCancel(e) {\n      this.props.history.push(\"/\" + this.props.urlBase.split('/')[0] + '/list');\n    }\n  }]);\n\n  return BasePageForm;\n}(BasePage);\n\nexport default BasePageForm;","map":{"version":3,"sources":["/home/davi/Desktop/gerenciamento-estagio-frontend/src/pages/basePage/BasePageForm.js"],"names":["BasePage","RestService","AlertifySuccess","AlertifyError","Rest","BasePageForm","props","role","onLoadUserRole","handleChange","bind","handleOnSubmit","handleReceiveResponseRest","handleCancel","e","setState","target","name","value","res","data","error","arrErrors","arrKeys","Object","keys","errors","fields","i","length","message","fieldErrors","form","console","log","history","push","urlBase","split","state","post","then"],"mappings":";;;;;;;;;AAAA,OAAOA,QAAP,MAAqB,YAArB;AACA,OAAOC,WAAP,MAAwB,4BAAxB;AACA,SAASC,eAAT,EAA0BC,aAA1B,QAA+C,gCAA/C;AAEA,IAAMC,IAAI,GAAG,IAAIH,WAAJ,EAAb;;IAEMI,Y;;;;;AAEL,wBAAYC,KAAZ,EACA;AAAA;;AAAA;;AACC,sFAAMA,KAAN;;AAEA,QAAG,MAAKA,KAAL,CAAWC,IAAX,IAAmB,IAAtB,EAA4B;AAC3B,YAAKD,KAAL,CAAWE,cAAX;AACA;;AAED,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBC,IAAlB,+BAApB;AACA,UAAKC,cAAL,GAAsB,MAAKA,cAAL,CAAoBD,IAApB,+BAAtB;AACA,UAAKE,yBAAL,GAAiC,MAAKA,yBAAL,CAA+BF,IAA/B,+BAAjC;AACM,UAAKG,YAAL,GAAoB,MAAKA,YAAL,CAAkBH,IAAlB,+BAApB;AAVP;AAWC;;;;iCAEYI,C,EACb;AAAA;;AACO,WAAKC,QAAL,uDACSD,CAAC,CAACE,MAAF,CAASC,IADlB,EACyBH,CAAC,CAACE,MAAF,CAASE,KADlC,kDAEqB,EAFrB;AAKH;;;8CAEyBC,G,EAC1B;AACI,UAAIA,GAAG,CAACC,IAAJ,CAASC,KAAb,EACH;AACC,YAAIC,SAAS,GAAG,EAAhB;AACA,YAAIC,OAAO,GAAGC,MAAM,CAACC,IAAP,CAAYN,GAAG,CAACC,IAAJ,CAASM,MAAT,CAAgBC,MAA5B,CAAd;;AAEA,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,OAAO,CAACM,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACxCN,UAAAA,SAAS,CAACC,OAAO,CAACK,CAAD,CAAR,CAAT,GAAwBT,GAAG,CAACC,IAAJ,CAASM,MAAT,CAAgBC,MAAhB,CAAuBJ,OAAO,CAACK,CAAD,CAA9B,EAAmCE,OAA3D;AACA;;AAED,aAAKf,QAAL,CAAc;AACbgB,UAAAA,WAAW,EAAET;AADA,SAAd;AAGMnB,QAAAA,aAAa,CAACgB,GAAG,CAACC,IAAJ,CAASM,MAAT,CAAgBM,IAAjB,CAAb;AAENC,QAAAA,OAAO,CAACC,GAAR,CAAYf,GAAG,CAACC,IAAJ,CAASU,OAArB;AACA,OAfE,MAeI;AACA5B,QAAAA,eAAe,CAAC,CAAC;AAAC4B,UAAAA,OAAO,EAAEX,GAAG,CAACC,IAAJ,CAASU;AAAnB,SAAD,CAAD,CAAf;AACA,aAAKxB,KAAL,CAAW6B,OAAX,CAAmBC,IAAnB,CAAwB,MAAM,KAAK9B,KAAL,CAAW+B,OAAX,CAAmBC,KAAnB,CAAyB,GAAzB,EAA8B,CAA9B,CAAN,GAAyC,OAAjE;AACH;AACJ;;;;;;gDAEoBxB,C;;;;;AACjBmB,gBAAAA,OAAO,CAACC,GAAR,CAAY,KAAKK,KAAjB;AACHnC,gBAAAA,IAAI,CAACoC,IAAL,CAAU,KAAKlC,KAAL,CAAW+B,OAArB,EAA8B,KAAKE,KAAnC,EAA0CE,IAA1C,CAA+C,KAAK7B,yBAApD;;;;;;;;;;;;;;;;;;iCAGYE,C,EAAG;AACZ,WAAKR,KAAL,CAAW6B,OAAX,CAAmBC,IAAnB,CAAwB,MAAM,KAAK9B,KAAL,CAAW+B,OAAX,CAAmBC,KAAnB,CAAyB,GAAzB,EAA8B,CAA9B,CAAN,GAAyC,OAAjE;AACH;;;;EAvDsBtC,Q;;AA0D3B,eAAeK,YAAf","sourcesContent":["import BasePage from './BasePage';\nimport RestService from '../../services/RestService';\nimport { AlertifySuccess, AlertifyError } from '../../services/AlertifyService';\n\nconst Rest = new RestService();\n\nclass BasePageForm extends BasePage\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\t\t\n\t\tif(this.props.role == null) {\n\t\t\tthis.props.onLoadUserRole();\n\t\t}\n\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t\tthis.handleOnSubmit = this.handleOnSubmit.bind(this);\n\t\tthis.handleReceiveResponseRest = this.handleReceiveResponseRest.bind(this);\n        this.handleCancel = this.handleCancel.bind(this);\n\t}\n\n\thandleChange(e)\n\t{\n        this.setState({\n                [e.target.name]: e.target.value,\n                fieldErrors: []\n            }\n        )\n    }\n\n    handleReceiveResponseRest(res)\n    {\n        if (res.data.error)\n    \t{\n    \t\tlet arrErrors = [];\n    \t\tlet arrKeys = Object.keys(res.data.errors.fields)\n\n    \t\tfor (let i = 0; i < arrKeys.length; i++) {\n    \t\t\tarrErrors[arrKeys[i]] = res.data.errors.fields[arrKeys[i]].message;\n    \t\t}\n\n    \t\tthis.setState({\n    \t\t\tfieldErrors: arrErrors,\n    \t\t});\n            AlertifyError(res.data.errors.form);\n\n    \t\tconsole.log(res.data.message)\n    \t} else {\n            AlertifySuccess([{message: res.data.message}]);\n            this.props.history.push('/' + this.props.urlBase.split('/')[0] + '/list');\n        }\n    }\n\n    async handleOnSubmit(e) {\n        console.log(this.state);\n    \tRest.post(this.props.urlBase, this.state).then(this.handleReceiveResponseRest)\n    }\n\n    handleCancel(e) {\n        this.props.history.push(\"/\" + this.props.urlBase.split('/')[0] + '/list');\n    }\n}\n\nexport default BasePageForm;"]},"metadata":{},"sourceType":"module"}